# Staging Environment Configuration
# Production-like environment for testing deployments

# Application Settings
ENVIRONMENT=staging
APP_PORT=8000
LOG_LEVEL=INFO
DEBUG=false
RELOAD=false

# API Settings
API_BASE_URL=https://staging.pl8wrds.com
ENABLE_SWAGGER_UI=true
ENABLE_REDOC=true

# Redis Configuration
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=${REDIS_PASSWORD}

# Cache Settings
CACHE_TTL=3600
CACHE_PREFIX=pl8wrds:staging:

# Database
DATABASE_URL=postgresql://pl8wrds:${POSTGRES_PASSWORD}@postgres:5432/pl8wrds_staging
POSTGRES_DB=pl8wrds_staging
POSTGRES_USER=pl8wrds
POSTGRES_PASSWORD=${POSTGRES_PASSWORD}

# External Services
OLLAMA_BASE_URL=http://ollama:11434
OLLAMA_MODEL=cogito:14b
OPENAI_API_KEY=${OPENAI_API_KEY}

# Model Paths
MODEL_PATH=models/word_scoring_ridge_v3.joblib
FEATURE_CACHE_PATH=cache/corpus_features.json
CORPUS_STATS_PATH=cache/corpus_stats.json
DICTIONARY_PATH=data/words_with_freqs.json

# Performance (moderate settings for staging)
WORKERS=2
WORKER_CONNECTIONS=500
MAX_REQUESTS=500
MAX_REQUESTS_JITTER=50
TIMEOUT=30
KEEP_ALIVE=2

# Security
SECRET_KEY=${SECRET_KEY}
API_KEY=${API_KEY}
ALLOWED_ORIGINS=https://staging.pl8wrds.com,https://staging-admin.pl8wrds.com
ALLOWED_METHODS=GET,POST,PUT,DELETE
ALLOWED_HEADERS=Content-Type,Authorization,X-API-Key
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=200
RATE_LIMIT_WINDOW=3600

# Monitoring
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
METRICS_ENABLED=true

# Logging
LOG_FORMAT=json
LOG_FILE_PATH=logs/staging.log
LOG_MAX_SIZE=100MB
LOG_BACKUP_COUNT=5

# SSL/TLS
SSL_CERT_PATH=/etc/nginx/ssl/staging-cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/staging-key.pem

# Feature Flags
ENABLE_METRICS_ENDPOINT=true
ENABLE_HEALTH_CHECKS=true
ENABLE_CORS=true
ENABLE_GZIP=true
ENABLE_ASYNC_PROCESSING=true
ENABLE_CACHING=true
ENABLE_RATE_LIMITING=true

# Container Resource Limits
APP_MEMORY_LIMIT=1G
APP_CPU_LIMIT=1.0
REDIS_MEMORY_LIMIT=512M
REDIS_CPU_LIMIT=0.5

# Testing (disabled in staging)
TESTING=false