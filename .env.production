# Production Environment Configuration
# Secure, optimized settings for production deployment

# Application Settings
ENVIRONMENT=production
APP_PORT=8000
LOG_LEVEL=WARNING
DEBUG=false
RELOAD=false

# API Settings
API_BASE_URL=https://pl8wrds.com
ENABLE_SWAGGER_UI=false  # Disabled in production for security
ENABLE_REDOC=false       # Disabled in production for security

# Redis Configuration
REDIS_URL=redis://redis:6379
REDIS_PASSWORD=${REDIS_PASSWORD}

# Cache Settings (longer TTL for production)
CACHE_TTL=7200
CACHE_PREFIX=pl8wrds:prod:

# Database
DATABASE_URL=postgresql://pl8wrds:${POSTGRES_PASSWORD}@postgres:5432/pl8wrds
POSTGRES_DB=pl8wrds
POSTGRES_USER=pl8wrds
POSTGRES_PASSWORD=${POSTGRES_PASSWORD}

# External Services
OLLAMA_BASE_URL=http://ollama:11434
OLLAMA_MODEL=cogito:14b
OPENAI_API_KEY=${OPENAI_API_KEY}

# Model Paths
MODEL_PATH=models/word_scoring_ridge_v3.joblib
FEATURE_CACHE_PATH=cache/corpus_features.json
CORPUS_STATS_PATH=cache/corpus_stats.json
DICTIONARY_PATH=data/words_with_freqs.json

# Performance (optimized for production)
WORKERS=4
WORKER_CONNECTIONS=1000
MAX_REQUESTS=1000
MAX_REQUESTS_JITTER=100
TIMEOUT=30
KEEP_ALIVE=2

# Memory and Resource Limits
MAX_MEMORY_USAGE=2G
CACHE_MAX_SIZE=1GB

# Security (strict settings)
SECRET_KEY=${SECRET_KEY}
API_KEY=${API_KEY}
ALLOWED_ORIGINS=https://pl8wrds.com
ALLOWED_METHODS=GET,POST
ALLOWED_HEADERS=Content-Type,Authorization,X-API-Key
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=100
RATE_LIMIT_WINDOW=3600

# Monitoring
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000
METRICS_ENABLED=true

# Logging (production-optimized)
LOG_FORMAT=json
LOG_FILE_PATH=logs/production.log
LOG_MAX_SIZE=500MB
LOG_BACKUP_COUNT=10

# SSL/TLS (production certificates)
SSL_CERT_PATH=/etc/nginx/ssl/production-cert.pem
SSL_KEY_PATH=/etc/nginx/ssl/production-key.pem

# Nginx Settings
NGINX_PORT=80
NGINX_SSL_PORT=443

# Feature Flags (production-safe)
ENABLE_METRICS_ENDPOINT=false  # Only internal monitoring
ENABLE_HEALTH_CHECKS=true
ENABLE_CORS=true
ENABLE_GZIP=true
ENABLE_ASYNC_PROCESSING=true
ENABLE_CACHING=true
ENABLE_RATE_LIMITING=true

# Container Resource Limits (production)
APP_MEMORY_LIMIT=2G
APP_CPU_LIMIT=2.0
REDIS_MEMORY_LIMIT=1G
REDIS_CPU_LIMIT=0.5

# Deployment Settings
DEPLOYMENT_ENVIRONMENT=production
CLUSTER_NAME=pl8wrds-prod
NAMESPACE=pl8wrds-prod

# Registry Settings
REGISTRY=ghcr.io
IMAGE_NAME=username/pl8wrds

# Python Optimizations
PYTHONOPTIMIZE=2

# Testing (disabled in production)
TESTING=false

# Backup and Recovery
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 2 * * *  # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# Alerting
ALERT_EMAIL=${ALERT_EMAIL}
SLACK_WEBHOOK=${SLACK_WEBHOOK}

# Health Check Settings
HEALTH_CHECK_INTERVAL=30s
HEALTH_CHECK_TIMEOUT=10s
HEALTH_CHECK_RETRIES=3